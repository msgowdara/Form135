<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Form 135 - Digital Filler</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- jsPDF & AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* DARK MODE THEME */
        body { font-family: 'Inter', sans-serif; @apply bg-gray-900 text-gray-100; }
        
        /* Container for sections */
        .form-section { @apply bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700 mb-6; }
        
        /* Headings */
        .section-title { @apply text-lg font-bold text-orange-400 mb-4 border-b border-gray-600 pb-2 flex items-center gap-2; }
        
        .input-group { @apply mb-4; }
        .input-label { @apply block text-sm font-medium text-gray-300 mb-1; }
        
        /* HIGH CONTRAST INPUTS */
        .form-input { 
            @apply w-full rounded-md border-2 border-gray-500 bg-white text-gray-900 shadow-sm p-2 text-sm transition-colors;
            @apply focus:border-orange-500 focus:ring-2 focus:ring-orange-500 font-medium;
        }
        .form-input::placeholder { @apply text-gray-400; }
        .form-input:invalid { @apply border-red-500 ring-2 ring-red-500 bg-red-50; }
        
        /* Buttons */
        .btn-primary { @apply bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 transition-colors font-bold shadow-md flex items-center gap-2; }
        .btn-secondary { @apply bg-gray-700 text-white border border-gray-500 px-3 py-1 rounded hover:bg-gray-600 transition-colors text-xs; }
        
        /* Table Styles */
        .table-container { @apply overflow-x-auto border rounded-md border-gray-600 mb-2 bg-gray-800; }
        table { @apply w-full text-left border-collapse; }
        th { @apply bg-gray-700 text-gray-200 text-xs font-semibold p-2 border border-gray-600 whitespace-nowrap; }
        td { @apply border border-gray-600 p-1 min-w-[100px]; }
        
        /* Table Inputs */
        .table-input { 
            @apply w-full border border-gray-400 rounded bg-white text-gray-900 p-1 text-sm;
            @apply focus:ring-2 focus:ring-orange-500 focus:border-orange-500; 
        }

        /* Calculator Display */
        .calc-box { @apply bg-gray-700 p-4 rounded border border-gray-600 text-center; }
        .calc-label { @apply text-xs font-bold text-gray-400 uppercase tracking-wide; }
        .calc-value { @apply text-xl font-bold text-orange-400; }
        
        .required-star { @apply text-red-400 ml-1; }
    </style>
</head>
<body class="pb-20">

    <!-- DISCLAIMER / CREDIT -->
    <div class="bg-black text-orange-500 text-center p-2 text-xs font-medium tracking-wide border-b border-gray-800">
        The tool created by Mallikarjunagowda Gowdara, Chief Manager, Bank of Baroda. This is only for educational purpose, and this do not endorse the official Form 135 format.
    </div>

    <!-- Navbar -->
    <nav class="bg-gray-800 text-white shadow-lg sticky top-0 z-50 border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img id="logoPreview" src="" class="h-10 w-auto bg-white rounded p-1 object-contain hidden">
                <div class="bg-orange-600 text-white p-1.5 rounded font-bold text-xl" id="defaultLogoIcon">B</div>
                <div>
                    <h1 class="font-bold text-lg leading-tight text-gray-100">Bank of Baroda</h1>
                    <p class="text-xs text-orange-400 opacity-90">Form No. 135 (New Format)</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="validateAndGenerate()" class="bg-white text-orange-700 px-4 py-2 rounded shadow hover:bg-orange-50 font-bold transition flex items-center gap-2">
                    <i class="fas fa-file-pdf"></i> Download PDF
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 py-8">
        
        <!-- Controls -->
        <div class="bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-700 mb-6 flex flex-wrap gap-4 items-center">
             <label class="bg-gray-700 text-gray-200 px-3 py-2 rounded border border-gray-600 hover:bg-gray-600 cursor-pointer text-sm flex items-center gap-2">
                <i class="fas fa-image text-orange-400"></i> Upload Logo
                <input type="file" id="logoUpload" accept="image/*" class="hidden" onchange="handleLogoUpload(this)">
            </label>
            
            <label class="bg-gray-700 text-gray-200 px-3 py-2 rounded border border-gray-600 hover:bg-gray-600 cursor-pointer text-sm flex items-center gap-2">
                <i class="fas fa-user-circle text-orange-400"></i> Upload Applicant Photo
                <input type="file" id="photoUpload" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
            </label>
            
            <div id="photoPreviewContainer" class="hidden flex items-center gap-2 text-xs text-green-400 font-bold">
                 <i class="fas fa-check-circle"></i> Photo Loaded
                 <img id="applicantPhotoPreview" class="h-8 w-8 object-cover rounded-full border border-gray-500">
            </div>
            
            <div class="text-xs text-gray-400 w-full mt-2">
                <i class="fas fa-info-circle"></i> For GitHub: Place 'logo.png' in repo root.
            </div>
        </div>

        <form id="bankForm" oninput="calculateNetWorth()">
            
            <!-- Header Info -->
            <div class="form-section">
                <div class="input-group">
                    <label class="input-label">Branch Name</label>
                    <input type="text" id="branchName" class="form-input" placeholder="Enter Branch Name">
                </div>
                <div class="input-group">
                    <label class="input-label">As At Date (Assets & Liabilities Position)</label>
                    <input type="date" id="asAtDate" class="form-input">
                </div>
            </div>

            <!-- 1-3. Personal -->
            <div class="form-section">
                <h2 class="section-title">1-3. Personal Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group md:col-span-2">
                        <label class="input-label">1. Name in Full <span class="required-star">*</span></label>
                        <input type="text" id="fullName" class="form-input" required>
                    </div>
                    <div class="input-group">
                        <label class="input-label">2. Date of Birth <span class="required-star">*</span></label>
                        <input type="date" id="dob" class="form-input" onchange="calculateAge()" required>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Age</label>
                        <input type="text" id="age" class="form-input bg-gray-200" readonly>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Place of Birth</label>
                        <input type="text" id="pob" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">3(a). Father's / Husband's Name <span class="required-star">*</span></label>
                        <input type="text" id="fatherName" class="form-input" required>
                    </div>
                    <div class="input-group">
                        <label class="input-label">3(b). Mother's Name</label>
                        <input type="text" id="motherName" class="form-input">
                    </div>
                </div>
            </div>

            <!-- 4-5. Address & Contact -->
            <div class="form-section">
                <h2 class="section-title">4-5. Address & Contact</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="input-label">4. Permanent Address <span class="required-star">*</span></label>
                        <textarea id="permAddress" rows="3" class="form-input" required minlength="20"></textarea>
                        <input type="text" id="permPin" placeholder="Pin Code" class="form-input mt-2">
                    </div>
                    <div>
                        <label class="input-label">Present Address <span class="required-star">*</span></label>
                        <textarea id="currAddress" rows="3" class="form-input" required minlength="20"></textarea>
                        <input type="text" id="currPin" placeholder="Pin Code" class="form-input mt-2">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                    <div class="input-group">
                        <label class="input-label">5. Office/Shop Tel</label>
                        <input type="text" id="telOffice" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Residence Tel</label>
                        <input type="text" id="telResi" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Mobile No <span class="required-star">*</span></label>
                        <input type="text" id="mobile" class="form-input" required>
                    </div>
                </div>
            </div>

            <!-- 6. Occupation -->
            <div class="form-section">
                <h2 class="section-title">6. Occupation / Line of Business</h2>
                <div class="mb-4">
                    <label class="input-label">Select Type</label>
                    <select id="occType" class="form-input" onchange="toggleOccupationFields()">
                        <option value="service">A. Service</option>
                        <option value="business">B. Business / Professional</option>
                    </select>
                </div>

                <!-- A. Service -->
                <div id="serviceFields" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group md:col-span-2">
                        <label class="input-label">Name of Employer & Address</label>
                        <textarea id="empDetails" rows="2" class="form-input"></textarea>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Designation</label>
                        <input type="text" id="designation" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Working Since</label>
                        <input type="text" id="workingSince" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Salary A/c No. (Savings Bank)</label>
                        <input type="text" id="salaryAcc" class="form-input">
                    </div>
                </div>

                <!-- B. Business -->
                <div id="businessFields" class="hidden grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group md:col-span-2">
                        <label class="input-label">i) Name of Firm/Company & Address</label>
                        <textarea id="firmDetails" rows="2" class="form-input"></textarea>
                    </div>
                    <div class="input-group">
                        <label class="input-label">ii) Line of Activities</label>
                        <input type="text" id="lineActivity" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">iii) Established Since</label>
                        <input type="text" id="established" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">iv) Capacity Representing</label>
                        <input type="text" id="capacity" class="form-input">
                    </div>
                </div>
            </div>

            <!-- 7-8 Income & PAN -->
            <div class="form-section">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group">
                        <label class="input-label">7. Annual Income (Rs.) <span class="required-star">*</span></label>
                        <input type="number" id="income" class="form-input" required>
                    </div>
                    <div class="input-group">
                        <label class="input-label">8. PAN Number</label>
                        <input type="text" id="pan" class="form-input uppercase">
                    </div>
                </div>
            </div>

            <!-- 9.1 Immovable -->
            <div class="form-section">
                <h2 class="section-title">9. Details of Assets</h2>
                
                <h3 class="text-md font-bold text-gray-300 mb-2">9.1 Immovable Properties</h3>
                <div class="table-container">
                    <table class="w-full text-sm" id="immovableTable">
                        <thead>
                            <tr>
                                <th>(A) Nature</th>
                                <th>(B) Location</th>
                                <th>(C) Owner Name</th>
                                <th>(D) Cost (Rs)</th>
                                <th>(E) Mkt Value (Rs)</th>
                                <th>(F) Encumbrance</th>
                                <th class="w-10"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addImmovableRow()" class="btn-secondary">+ Add Property</button>
            </div>

            <!-- 9.2 Movable -->
            <div class="form-section">
                <h3 class="text-md font-bold text-gray-300 mb-2">9.2 Movable Properties</h3>
                
                <!-- A. LIC -->
                <div class="mb-4">
                    <label class="text-sm font-bold text-orange-300 block mb-1">A. LIC Policies</label>
                    <div class="table-container">
                        <table class="w-full text-sm" id="licTable">
                            <thead>
                                <tr>
                                    <th>Policy No</th>
                                    <th>Issue Date</th>
                                    <th>Sum Assured</th>
                                    <th>Branch</th>
                                    <th>Premium (Rs)</th>
                                    <th>Paid Up To</th>
                                    <th>Surrender Val (Net Worth)</th>
                                    <th class="w-8"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <button type="button" onclick="addLicRow()" class="btn-secondary">+ Add Policy</button>
                </div>

                <!-- B. Shares -->
                <div class="mb-4">
                    <label class="text-sm font-bold text-orange-300 block mb-1">B. Shares / Debentures</label>
                    <div class="table-container">
                        <table class="w-full text-sm" id="shareTable">
                            <thead>
                                <tr>
                                    <th>Company</th>
                                    <th>No. Held</th>
                                    <th>Cert/Acc No</th>
                                    <th>Face Value (Total)</th>
                                    <th>Paid? (Y/N)</th>
                                    <th>Mkt Value (Net Worth)</th>
                                    <th class="w-8"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <button type="button" onclick="addShareRow()" class="btn-secondary">+ Add Share</button>
                </div>

                <!-- C. Term Deposits -->
                <div class="mb-4">
                    <label class="text-sm font-bold text-orange-300 block mb-1">C. Term Deposits</label>
                    <div class="table-container">
                        <table class="w-full text-sm" id="depositTable">
                            <thead>
                                <tr>
                                    <th>FDR/RD No</th>
                                    <th>Date</th>
                                    <th>Fvg.</th>
                                    <th>Amount (Net Worth)</th>
                                    <th>Bank/Branch</th>
                                    <th>Due Date</th>
                                    <th>Maturity Val</th>
                                    <th class="w-8"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <button type="button" onclick="addDepositRow()" class="btn-secondary">+ Add Deposit</button>
                </div>

                <!-- D. Govt Securities -->
                <div class="mb-4">
                    <label class="text-sm font-bold text-orange-300 block mb-1">D. Govt Securities (Bonds/NSC)</label>
                    <div class="table-container">
                        <table class="w-full text-sm" id="bondTable">
                            <thead>
                                <tr>
                                    <th>Bond/Cert No</th>
                                    <th>Pur. Date</th>
                                    <th>Issuing Office</th>
                                    <th>Amount (Rs)</th>
                                    <th>Due Date</th>
                                    <th>Maturity Val</th>
                                    <th class="w-8"></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <button type="button" onclick="addBondRow()" class="btn-secondary">+ Add Bond</button>
                </div>
            </div>

            <!-- 9.3 - 9.6 Other Assets -->
            <div class="form-section">
                <h3 class="text-md font-bold text-gray-300 mb-2">9.3 Vehicles</h3>
                <div class="table-container">
                    <table class="w-full text-sm" id="vehTable">
                        <thead>
                            <tr>
                                <th>Reg No</th>
                                <th>Type</th>
                                <th>Value (Rs)</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addVehRow()" class="btn-secondary mb-4">+ Add Vehicle</button>

                <h3 class="text-md font-bold text-gray-300 mb-2">9.4 Capital Investment in Business</h3>
                <div class="table-container">
                    <table class="w-full text-sm" id="capTable">
                        <thead>
                            <tr>
                                <th>Name of Firm/Company</th>
                                <th>Investment Amount (Rs)</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addCapRow()" class="btn-secondary mb-4">+ Add Investment</button>

                <h3 class="text-md font-bold text-gray-300 mb-2">9.5 Other Investments (Jewellery, etc.)</h3>
                <div class="table-container">
                    <table class="w-full text-sm" id="otherInvTable">
                        <thead>
                            <tr>
                                <th>Jewellery (Rs)</th>
                                <th>Inv. in Other Business (Rs)</th>
                                <th>Others (Rs)</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addOtherInvRow()" class="btn-secondary">+ Add Row</button>
            </div>

            <!-- 10. Loans -->
            <div class="form-section">
                <h2 class="section-title">10. Details of Loans (Individual/Firm/Company)</h2>
                <div class="table-container">
                    <table class="w-full text-sm" id="loanTable">
                        <thead>
                            <tr>
                                <th>(A) Bank/Inst Name</th>
                                <th>(B) Purpose & Amount</th>
                                <th>(C) Security/Repayment</th>
                                <th>(D) Present Bal (Liab)</th>
                                <th>(E) Other Liabilities</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addLoanRow()" class="btn-secondary">+ Add Loan</button>
            </div>

            <!-- 11. Other Details (Guarantees) -->
            <div class="form-section">
                <h2 class="section-title">11. Other Details (Guarantees Given)</h2>
                <div class="table-container">
                    <table class="w-full text-sm" id="guaranteeTable">
                        <thead>
                            <tr>
                                <th>Name of Bank/Inst</th>
                                <th>On Whose Behalf</th>
                                <th>Amount of Guarantee</th>
                                <th>Status (Std/NPA)</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addGuaranteeRow()" class="btn-secondary">+ Add Guarantee</button>
            </div>

            <!-- Net Worth Summary -->
            <div class="bg-gray-700 p-6 rounded-lg mb-6 border border-gray-600">
                <h2 class="text-orange-400 font-bold text-lg mb-4 text-center">NET WORTH SUMMARY</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="calc-box">
                        <div class="calc-label">Total Assets (9.6)</div>
                        <div class="calc-value text-green-400" id="dispTotalAssets">₹ 0</div>
                    </div>
                    <div class="calc-box">
                        <div class="calc-label">Total Liabilities</div>
                        <div class="calc-value text-red-400" id="dispTotalLiab">₹ 0</div>
                    </div>
                    <div class="calc-box border-orange-500 bg-gray-800">
                        <div class="calc-label text-orange-400">Net Worth</div>
                        <div class="calc-value" id="dispNetWorth">₹ 0</div>
                    </div>
                </div>
            </div>

            <!-- 12. Legal Heirs -->
            <div class="form-section">
                <h2 class="section-title">12. Particulars of Legal Heirs</h2>
                
                <h3 class="text-sm font-bold text-gray-300 mb-2">(A) Details</h3>
                <div class="table-container">
                    <table class="w-full text-sm" id="heirTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Relationship</th>
                                <th>DOB</th>
                                <th>Age (Auto)</th>
                                <th>Occupation</th>
                                <th>Address</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addHeirRow()" class="btn-secondary">+ Add Heir</button>

                <h3 class="text-sm font-bold text-gray-300 mt-4 mb-2">(B) Nomination Particulars</h3>
                <div class="table-container">
                    <table class="w-full text-sm" id="nominationTable">
                        <thead>
                            <tr>
                                <th>Desc of Asset</th>
                                <th>Bank/Org</th>
                                <th>Acc/Cert No</th>
                                <th>Amount</th>
                                <th class="w-8"></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <button type="button" onclick="addNominationRow()" class="btn-secondary">+ Add Nomination</button>
            </div>

            <!-- 13. Declaration -->
            <div class="form-section">
                <h2 class="section-title">13. Declaration</h2>
                
                <!-- Enclosures Section -->
                <div class="bg-gray-700 p-4 rounded border border-gray-600 mb-4">
                    <p class="font-bold text-gray-300 mb-2 text-sm">In support of my above declaration, I enclose:</p>
                    <div class="space-y-1 text-xs text-gray-400">
                        <p>1. Balance sheet, Profit and Loss Accounts, Trading Account, Capital Account (audited/unaudited).</p>
                        <p>2. Copy of employment certificated with details of salary drawn.</p>
                        <p>3. Copies of agreement/revenue records/society certificates in respect of land/ building/flat owned by me.</p>
                        <p>4. Copies of Income Tax/Wealth tax returns/ Assessment Order.</p>
                    </div>
                </div>

                <div class="text-xs text-gray-300 leading-relaxed bg-gray-700 p-4 rounded border border-gray-600 mb-4">
                    I declare that I am/I am not (tick as applicable) a Director in ____/any Bank. There is no litigation against me or the firm/ Co. in which I am the proprietor/ a partner/ a Director.
                    The name of the firm /Co. or the name of the partners/Proprietor/Director of the firm/ Co. is not the caution list of RBI/ECGC.
                    The proprietor/partners/directors of the firm/Co. is/are not the Directors in any Co-operative Bank.
                    I also declare that the above information is complete, true and correct.
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group">
                        <label class="input-label">Place</label>
                        <input type="text" id="signPlace" class="form-input">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Date</label>
                        <input type="date" id="signDate" class="form-input">
                    </div>
                </div>
            </div>

            <!-- Submit -->
            <div class="flex justify-center mt-8">
                <button type="button" onclick="validateAndGenerate()" class="btn-primary text-lg px-8 py-4">
                    <i class="fas fa-file-pdf fa-lg"></i> Generate Form 135 PDF
                </button>
            </div>

        </form>
    </div>

    <script>
        const { jsPDF } = window.jspdf;

        // Configurations
        const GITHUB_LOGO_PATH = "logo.png";
        const REMOTE_LOGO_URL = "https://bankofbaroda.bank.in/about-us/-/media/Project/BOB/CountryWebsites/India/about-us/overview/BOB-New-Logo-2026-Eng.png";
        let logoBase64 = "";
        let applicantPhotoBase64 = "";

        // Init
        window.onload = function() {
            // Default row initialization
            addImmovableRow();
            addLicRow();
            addShareRow();
            addDepositRow();
            addBondRow();
            addVehRow();
            addCapRow();
            addOtherInvRow();
            addLoanRow();
            addGuaranteeRow();
            addHeirRow();
            addNominationRow();
            toggleOccupationFields();

            // Logo Load
            const img = new Image();
            img.crossOrigin = "Anonymous";
            img.onload = () => convertAndSetLogo(img);
            img.onerror = () => {
                const remote = new Image();
                remote.crossOrigin = "Anonymous";
                remote.onload = () => convertAndSetLogo(remote);
                remote.src = REMOTE_LOGO_URL;
            };
            img.src = GITHUB_LOGO_PATH;
        };

        function convertAndSetLogo(img) {
            const canvas = document.createElement('canvas');
            canvas.width = img.width; 
            canvas.height = img.height;
            canvas.getContext('2d').drawImage(img, 0, 0);
            try {
                logoBase64 = canvas.toDataURL('image/png');
                document.getElementById('logoPreview').src = logoBase64;
                document.getElementById('logoPreview').classList.remove('hidden');
                document.getElementById('defaultLogoIcon').classList.add('hidden');
            } catch(e) {}
        }

        function handleLogoUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    logoBase64 = e.target.result;
                    document.getElementById('logoPreview').src = logoBase64;
                    document.getElementById('logoPreview').classList.remove('hidden');
                    document.getElementById('defaultLogoIcon').classList.add('hidden');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function handlePhotoUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    applicantPhotoBase64 = e.target.result;
                    document.getElementById('applicantPhotoPreview').src = applicantPhotoBase64;
                    document.getElementById('photoPreviewContainer').classList.remove('hidden');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- Helper Functions ---
        function createDeleteBtn(onClick) {
            return `<button type="button" onclick="${onClick}; calculateNetWorth()" class="text-red-400 hover:text-red-300 font-bold p-1">X</button>`;
        }

        function formatDate(dateStr) {
            if(!dateStr) return "";
            const parts = dateStr.split('-');
            return parts.length === 3 ? `${parts[2]}-${parts[1]}-${parts[0]}` : dateStr;
        }

        function calculateAge() {
            const dobVal = document.getElementById('dob').value;
            if(!dobVal) return;
            const dob = new Date(dobVal);
            const today = new Date();
            let y = today.getFullYear() - dob.getFullYear();
            let m = today.getMonth() - dob.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                y--; m += 12;
            }
            if (today.getDate() < dob.getDate()) m--;
            document.getElementById('age').value = `${y} Yrs ${m < 0 ? m+12 : m} Mths`;
        }

        function calculateHeirAge(dobInput) {
            const row = dobInput.closest('tr');
            // Assuming structure: Name, Rel, DOB, Age, Occ, Addr, Del
            // DOB is 3rd cell (index 2), Age is 4th (index 3)
            const ageInput = row.cells[3].querySelector('input'); 
            
            if(!dobInput.value) return;
            
            const dob = new Date(dobInput.value);
            const today = new Date();
            
            let ageYears = today.getFullYear() - dob.getFullYear();
            let ageMonths = today.getMonth() - dob.getMonth();
            let ageDays = today.getDate() - dob.getDate();

            if (ageMonths < 0 || (ageMonths === 0 && ageDays < 0)) {
                ageYears--;
                ageMonths += 12;
            }
            
            if (ageDays < 0) {
                ageMonths--;
                if(ageMonths < 0) {
                    ageMonths += 12;
                }
            }

            ageInput.value = `${ageYears} Yrs ${ageMonths} Mths`;
        }

        function toggleOccupationFields() {
            const type = document.getElementById('occType').value;
            if(type === 'service') {
                document.getElementById('serviceFields').classList.remove('hidden');
                document.getElementById('businessFields').classList.add('hidden');
            } else {
                document.getElementById('serviceFields').classList.add('hidden');
                document.getElementById('businessFields').classList.remove('hidden');
            }
        }

        function copyAddress(btn) {
            const row = btn.closest('tr');
            const addrInput = row.querySelector('.heir-addr');
            const presentAddr = document.getElementById('currAddress').value;
            const presentPin = document.getElementById('currPin').value;
            addrInput.value = presentAddr + (presentPin ? `, ${presentPin}` : '');
        }

        // --- Dynamic Row Adders ---
        function addImmovableRow() {
            const tbody = document.querySelector('#immovableTable tbody');
            tbody.insertRow().innerHTML = `
                <td><select class="table-input"><option>Plot</option><option>Agri Land</option><option>House</option><option>Other</option></select></td>
                <td><input class="table-input" placeholder="Survey/Area"></td>
                <td><input class="table-input" placeholder="Name"></td>
                <td><input type="number" class="table-input" placeholder="0"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td><input class="table-input"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addLicRow() { // 9.2 A
            const tbody = document.querySelector('#licTable tbody');
            tbody.insertRow().innerHTML = `
                <td><input class="table-input" placeholder="No"></td>
                <td><input type="date" class="table-input"></td>
                <td><input type="number" class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addShareRow() { // 9.2 B
            document.querySelector('#shareTable tbody').insertRow().innerHTML = `
                <td><input class="table-input" placeholder="Co Name"></td>
                <td><input type="number" class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input"></td>
                <td><input class="table-input" placeholder="Y/N"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addDepositRow() { // 9.2 C
            document.querySelector('#depositTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input type="date" class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td><input class="table-input"></td>
                <td><input type="date" class="table-input"></td>
                <td><input type="number" class="table-input"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addBondRow() { // 9.2 D
            document.querySelector('#bondTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input type="date" class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td><input type="date" class="table-input"></td>
                <td><input type="number" class="table-input"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addVehRow() { // 9.3
            document.querySelector('#vehTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addCapRow() { // 9.4
            document.querySelector('#capTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addOtherInvRow() { // 9.5
            document.querySelector('#otherInvTable tbody').insertRow().innerHTML = `
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td><input type="number" class="table-input asset-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addLoanRow() { // 10
            document.querySelector('#loanTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="number" class="table-input liab-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td><input type="number" class="table-input liab-val" placeholder="0" oninput="calculateNetWorth()"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addGuaranteeRow() { // 11
            document.querySelector('#guaranteeTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><select class="table-input"><option>Standard</option><option>NPA</option></select></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addHeirRow() { // 12
            document.querySelector('#heirTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input type="date" class="table-input" onchange="calculateHeirAge(this)"></td>
                <td><input class="table-input w-24 bg-gray-200" readonly placeholder="Auto"></td>
                <td><input class="table-input"></td>
                <td><textarea class="table-input heir-addr" rows="1"></textarea><button type="button" onclick="copyAddress(this)" class="text-xs text-orange-400 hover:underline">Copy Present</button></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        function addNominationRow() { // 12B
            document.querySelector('#nominationTable tbody').insertRow().innerHTML = `
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td><input class="table-input"></td>
                <td class="text-center">${createDeleteBtn('this.closest("tr").remove()')}</td>`;
        }

        // --- Calc ---
        function calculateNetWorth() {
            let assets = 0, liabs = 0;
            document.querySelectorAll('.asset-val').forEach(i => assets += Number(i.value) || 0);
            document.querySelectorAll('.liab-val').forEach(i => liabs += Number(i.value) || 0);
            document.getElementById('dispTotalAssets').innerText = '₹ ' + assets.toLocaleString('en-IN');
            document.getElementById('dispTotalLiab').innerText = '₹ ' + liabs.toLocaleString('en-IN');
            document.getElementById('dispNetWorth').innerText = '₹ ' + (assets - liabs).toLocaleString('en-IN');
        }

        function getTableData(id) {
            return Array.from(document.querySelectorAll(`#${id} tbody tr`)).map(row => 
                Array.from(row.querySelectorAll('input, select, textarea')).map(input => {
                    if(input.type === 'date') return formatDate(input.value);
                    return (input.value || '').toUpperCase();
                })
            ).filter(row => row.some(cell => cell !== ""));
        }

        function validateAndGenerate() {
            const form = document.getElementById('bankForm');
            if(form.checkValidity()) generatePDF();
            else form.reportValidity();
        }

        // --- PDF Generation (New Format) ---
        function generatePDF() {
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.getWidth();
            let y = 15;

            // Logo & Header
            if(logoBase64) {
                const imgW = 75; const imgH = 75 / 2.44;
                doc.addImage(logoBase64, 'PNG', (pageWidth - imgW)/2, 10, imgW, imgH);
                y += imgH + 5;
            } else y += 15;

            doc.setFontSize(14).setFont("helvetica", "bold");
            doc.text("Form 135", pageWidth/2, y, {align: 'center'}); y += 7;
            
            doc.setFontSize(10).setFont("helvetica", "normal");
            const branch = document.getElementById('branchName').value.toUpperCase();
            doc.text(`BRANCH: ${branch}`, 14, y); y += 6;

            // HEADER TITLE + PHOTO LOGIC
            const headerTitle = "PARTICULARS TO BE SUPPLIED BY APPLICANT/ Directors/ partners/ Prop. , Guarantor FOR ADVANCES";
            // Check space for photo next to title
            const photoW = 35;
            const photoH = 45;
            const photoX = pageWidth - 14 - photoW; // Right align photo
            const photoY = y - 5; // Start slightly above title line

            doc.setFont("helvetica", "bold");
            // Wrap text to fit left of photo (Approx width 140)
            const splitTitle = doc.splitTextToSize(headerTitle, 135);
            doc.text(splitTitle, 14, y);
            
            // Draw Photo
            if (applicantPhotoBase64) {
                 try {
                    doc.addImage(applicantPhotoBase64, 'JPEG', photoX, photoY, photoW, photoH);
                    doc.rect(photoX, photoY, photoW, photoH); 
                } catch(e) {
                     doc.rect(photoX, photoY, photoW, photoH);
                     doc.setFontSize(8).text("Photo", photoX + 10, photoY + 20);
                }
            } else {
                doc.rect(photoX, photoY, photoW, photoH);
                doc.setFontSize(8).text("Photo", photoX + 12, photoY + 25);
            }

            y += splitTitle.length * 5 + 5; // Move Y down past title text
            
            doc.setFont("helvetica", "normal").setFontSize(10);
            const asAt = formatDate(document.getElementById('asAtDate').value);
            doc.text(`I give below the particulars of myself, my family and my Assets & Liabilities as at ${asAt}.`, 14, y); y += 8;

            // Ensure Y clears the photo box
            if (y < (photoY + photoH + 5)) {
                y = photoY + photoH + 5;
            }

            // Fields Helper
            const printField = (lbl, val, x=14) => {
                doc.setFont("helvetica", "bold").text(lbl, x, y);
                doc.setFont("helvetica", "normal").text(val || "", x + doc.getTextWidth(lbl) + 2, y);
            };

            // 1. Name
            printField("1. Name in Full: ", document.getElementById('fullName').value.toUpperCase());
            y += 6;

            // 2. DOB/Age/Place
            const dob = formatDate(document.getElementById('dob').value);
            const age = document.getElementById('age').value.toUpperCase();
            const pob = document.getElementById('pob').value.toUpperCase();
            printField("2. Date of Birth: ", dob);
            printField(" & Age: ", age, 80);
            printField(" Place of Birth: ", pob, 140);
            y += 6;

            // 3. Parents
            printField("3. (a) Father's/Husband's Name: ", document.getElementById('fatherName').value.toUpperCase()); y+=6;
            printField("    (b) Mother's Name: ", document.getElementById('motherName').value.toUpperCase()); y+=6;

            // 4. Address
            doc.setFont("helvetica", "bold").text("4. Residential Address:", 14, y); y+=5;
            const pAddr = document.getElementById('permAddress').value.toUpperCase() + " PIN: " + document.getElementById('permPin').value;
            const cAddr = document.getElementById('currAddress').value.toUpperCase() + " PIN: " + document.getElementById('currPin').value;
            
            doc.autoTable({
                startY: y,
                head: [['PERMANENT', 'PRESENT']],
                body: [[pAddr, cAddr]],
                theme: 'plain',
                styles: { cellPadding: 1, fontSize: 10 },
                margin: { left: 14, right: 14 }
            });
            y = doc.lastAutoTable.finalY + 6;

            // 5. Contact
            const off = document.getElementById('telOffice').value;
            const res = document.getElementById('telResi').value;
            const mob = document.getElementById('mobile').value;
            doc.text(`5. Telephone: Office: ${off}  Resi: ${res}  Mobile: ${mob}`, 14, y); y += 6;

            // 6. Occupation
            const occ = document.getElementById('occType').value;
            doc.text("6. Occupation / Line of Business:", 14, y); y += 5;
            
            if(occ === 'service') {
                doc.text("A. If in Service:", 14, y); y+=5;
                doc.text(`   Name of Employer: ${document.getElementById('empDetails').value.toUpperCase()}`, 14, y); y+=5;
                doc.text(`   Designation: ${document.getElementById('designation').value.toUpperCase()}`, 14, y); y+=5;
                doc.text(`   Working Since: ${document.getElementById('workingSince').value.toUpperCase()}`, 14, y); y+=5;
                doc.text(`   Salary A/c: ${document.getElementById('salaryAcc').value.toUpperCase()}`, 14, y); y+=6;
            } else {
                doc.text("B. If in Business/Professional:", 14, y); y+=5;
                doc.text(`   i) Firm Name: ${document.getElementById('firmDetails').value.toUpperCase()}`, 14, y); y+=5;
                doc.text(`   ii) Activity: ${document.getElementById('lineActivity').value.toUpperCase()}`, 14, y); y+=5;
                doc.text(`   iii) Since: ${document.getElementById('established').value.toUpperCase()}`, 14, y); y+=5;
                doc.text(`   iv) Capacity: ${document.getElementById('capacity').value.toUpperCase()}`, 14, y); y+=6;
            }

            // 7-8
            printField("7. Annual Income: Rs. ", document.getElementById('income').value); y+=6;
            printField("8. PAN: ", document.getElementById('pan').value.toUpperCase()); y+=6;

            // 9. Assets
            doc.setFont("helvetica", "bold").text("9. Details of Assets:", 14, y); y+=5;
            
            // 9.1 Immovable
            doc.setFontSize(9).text("9.1 Details of Immovable Properties:", 14, y);
            doc.autoTable({
                startY: y+2,
                head: [['Nature', 'Location', 'Owner', 'Cost', 'Mkt Val', 'Encumbrance']],
                body: getTableData('immovableTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // 9.2 Movable
            doc.text("9.2 Details of Movable Properties:", 14, y); y+=4;
            
            doc.text("A. LIC Policies", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['Policy No', 'Issue Dt', 'Sum Assured', 'Branch', 'Prem', 'Paid Up', 'Surr Val']],
                body: getTableData('licTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            doc.text("B. Shares / Debentures", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['Company', 'No.', 'Cert/Acc', 'Face Val', 'Paid?', 'Mkt Val']],
                body: getTableData('shareTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // Check Page Break
            if(y > 250) { doc.addPage(); y=20; }

            doc.text("C. Term Deposits", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['FDR No', 'Date', 'Fvg', 'Amount', 'Bank', 'Due Dt', 'Mat Val']],
                body: getTableData('depositTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            doc.text("D. Govt Securities", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['Bond No', 'Pur Dt', 'Office', 'Amount', 'Due Dt', 'Mat Val']],
                body: getTableData('bondTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // 9.3 Vehicles
            doc.text("9.3 Vehicles", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['Reg No', 'Type', 'Value']],
                body: getTableData('vehTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // 9.4 Cap Investment
            doc.text("9.4 Capital Investment", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['Firm Name', 'Amount']],
                body: getTableData('capTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // 9.5 Other
            if(y > 250) { doc.addPage(); y=20; }
            doc.text("9.5 Other Investments", 14, y);
            doc.autoTable({
                startY: y+1,
                head: [['Jewellery (Rs)', 'Inv. Other Biz (Rs)', 'Others (Rs)']],
                body: getTableData('otherInvTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // 9.6 Total
            const totAssets = document.getElementById('dispTotalAssets').innerText;
            doc.setFont("helvetica", "bold").text(`9.6 Total of all assets: ${totAssets}`, 14, y); y+=8;

            // 10. Loans
            doc.text("10. Details of Loans:", 14, y);
            doc.autoTable({
                startY: y+2,
                head: [['Bank', 'Purpose', 'Security', 'Outstanding', 'Other Liab']],
                body: getTableData('loanTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 6;

            // 11. Other Details (Guarantees)
            if(y > 250) { doc.addPage(); y=20; }
            doc.text("11. Other Details (Guarantees Given):", 14, y);
            doc.autoTable({
                startY: y+2,
                head: [['Bank/Inst', 'On Behalf Of', 'Amount', 'Status']],
                body: getTableData('guaranteeTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 6;

            // 12. Legal Heirs
            if(y > 230) { doc.addPage(); y=20; }
            doc.text("12(A). Particulars of Legal Heirs:", 14, y);
            doc.autoTable({
                startY: y+2,
                head: [['Name', 'Rel', 'DOB', 'Age', 'Occ', 'Address']],
                body: getTableData('heirTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 6;

            doc.text("12(B). Nomination Particulars:", 14, y);
            doc.autoTable({
                startY: y+2,
                head: [['Asset', 'Bank', 'Cert No', 'Amount']],
                body: getTableData('nominationTable'),
                theme: 'grid',
                styles: { fontSize: 8 },
                headStyles: { fillColor: [220,220,220], textColor:0 }
            });
            y = doc.lastAutoTable.finalY + 8;

            // 13. Declaration with Enclosures
            if(y > 220) { doc.addPage(); y=20; }
            doc.setFontSize(9).setFont("helvetica", "normal");
            
            // Explicitly place enclosures here as requested
            doc.text("In support of my above declaration, I enclose:", 14, y); y+=5;
            const encl = [
                "1. Balance sheet, Profit/Loss, Trading, Capital Account.",
                "2. Employment certificate with details of salary drawn.",
                "3. Property agreement/revenue records/society certs.",
                "4. IT/Wealth tax returns/Assessment Order."
            ];
            encl.forEach(e => { doc.text(e, 14, y); y+=5; });
            
            y+=2;
            doc.setFont("helvetica", "bold").text("13. DECLARATION:", 14, y); y+=5;
            doc.setFont("helvetica", "normal");
            const decl = "I declare that I am/I am not (tick as applicable) a Director in ____/any Bank. There is no litigation against me or the firm/ Co. in which I am the proprietor/ a partner/ a Director. The name of the firm /Co. or the name of the partners/Proprietor/Director of the firm/ Co. is not the caution list of RBI/ECGC. The proprietor/partners/directors of the firm/Co. is/are not the Directors in any Co-operative Bank. I also declare that the above information is complete, true and correct.";
            const splitDecl = doc.splitTextToSize(decl, 180);
            doc.text(splitDecl, 14, y);
            y += splitDecl.length * 4 + 10;

            const place = document.getElementById('signPlace').value.toUpperCase();
            const signDate = formatDate(document.getElementById('signDate').value);
            
            doc.text(`Place: ${place}`, 14, y); 
            doc.text(`Signature of Applicant / Guarantor`, 130, y); y+=6;
            doc.text(`Date: ${signDate}`, 14, y);

            doc.save('Form_135_New_Format.pdf');
        }
    </script>
</body>
</html>
